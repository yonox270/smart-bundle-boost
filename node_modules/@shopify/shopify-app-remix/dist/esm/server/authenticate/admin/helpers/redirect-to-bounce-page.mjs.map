{"version":3,"file":"redirect-to-bounce-page.mjs","sources":["../../../../../../../src/server/authenticate/admin/helpers/redirect-to-bounce-page.ts"],"sourcesContent":["import {redirect} from '@remix-run/server-runtime';\n\nimport {BasicParams} from '../../../types';\n\nexport const redirectToBouncePage = (params: BasicParams, url: URL): never => {\n  const {config} = params;\n\n  // Make sure we always point to the configured app URL so it also works behind reverse proxies (that alter the Host\n  // header).\n  const searchParams = url.searchParams;\n  searchParams.delete('id_token');\n  searchParams.set(\n    'shopify-reload',\n    `${config.appUrl}${url.pathname}?${searchParams.toString()}`,\n  );\n\n  // eslint-disable-next-line no-warning-comments\n  // TODO Make sure this works on chrome without a tunnel (weird HTTPS redirect issue)\n  // https://github.com/orgs/Shopify/projects/6899/views/1?pane=issue&itemId=28376650\n  throw redirect(\n    `${config.auth.patchSessionTokenPath}?${searchParams.toString()}`,\n  );\n};\n"],"names":[],"mappings":";;MAIa,oBAAoB,GAAG,CAAC,MAAmB,EAAE,GAAQ,KAAW;AAC3E,IAAA,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM;;;AAIvB,IAAA,MAAM,YAAY,GAAG,GAAG,CAAC,YAAY;AACrC,IAAA,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC;IAC/B,YAAY,CAAC,GAAG,CACd,gBAAgB,EAChB,CAAA,EAAG,MAAM,CAAC,MAAM,CAAA,EAAG,GAAG,CAAC,QAAQ,IAAI,YAAY,CAAC,QAAQ,EAAE,CAAA,CAAE,CAC7D;;;;AAKD,IAAA,MAAM,QAAQ,CACZ,CAAA,EAAG,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAA,CAAA,EAAI,YAAY,CAAC,QAAQ,EAAE,CAAA,CAAE,CAClE;AACH;;;;"}